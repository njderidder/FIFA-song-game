<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FIFA Swipe — Left = FIFA, Right = Not</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
<meta name="color-scheme" content="dark light" />
<style>
  :root{
    --bg1:#040a06; --bg2:#06130a;
    --glass:#0b1c12cc; --ink:#e9ffe9; --ink-sub:#b7f1b7; --ink-dim:#89c889;
    --good:#2de37d; --bad:#ff6565; --gold:#e6ff68;
    --radius:18px; --ease:cubic-bezier(.2,.8,.2,1);
  }
  html,body{height:100%;margin:0}
  body{
    font-family:"Plus Jakarta Sans", system-ui, -apple-system, Segoe UI, Roboto, Arial;
    color:var(--ink);
    background:
      radial-gradient(1200px 700px at 20% 10%, #0dbf5a22 0%, transparent 60%),
      radial-gradient(1000px 500px at 80% 20%, #00ff8a22 0%, transparent 60%),
      radial-gradient(800px 600px at 50% 90%, #00c26b1f 0%, transparent 60%),
      linear-gradient(180deg, var(--bg2) 0%, var(--bg1) 100%);
    overflow:hidden;
  }
  .glow{position:fixed; inset:-25vmax; pointer-events:none; filter:blur(80px) saturate(160%);
    background:radial-gradient(40vmax 30vmax at var(--x,50%) var(--y,40%), #0bd46f22 0%, transparent 60%);}

  .app{position:relative; z-index:1; width:min(960px,96vw); height:min(880px,94vh);
    margin:2vh auto; display:grid; grid-template-rows:auto 1fr auto; gap:16px;}

  header{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    padding:10px 14px;
    background:rgba(0,0,0,.88);
    backdrop-filter:blur(10px) saturate(160%);
    border-radius:16px;
  }
  .brand{display:flex; align-items:center; gap:12px}
  .logo{width:38px; height:38px; border-radius:10px;
    background:linear-gradient(140deg, #00ff88, #0bbf6f);
    box-shadow:0 10px 24px #00ff8840, inset 0 0 0 2px #ffffff33;}
  .title{font-weight:800; letter-spacing:.2px; font-size:20px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width:65vw;}
  .muted{color:var(--ink-dim); font-weight:600}

  /* Beer cans */
  .beer-container{display:flex; align-items:flex-end; gap:10px}
  .can{
    position:relative; width:38px; height:80px;
    border-radius:8px;
    background:linear-gradient(to bottom,#0d4e29,#05331a);
    box-shadow:inset 0 -6px 10px rgba(0,0,0,.55), 0 3px 10px rgba(0,0,0,.45);
    overflow:hidden;
  }
  .can .fill{
    position:absolute; left:4px; right:4px; bottom:4px; height:0%;
    background:linear-gradient(to bottom,#f7cf70,#d49f2a);
    border-radius:4px; transition:height .18s var(--ease);
  }
  .can .sip-count{
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    color:#09200f; font-weight:900; font-size:.9rem; text-shadow:0 1px 0 #ffffff88;
    pointer-events:none; user-select:none;
  }

  .deck{position:relative; overflow:visible;}
  .card{
    position:absolute; inset:0;
    display:grid; grid-template-rows:auto auto 1fr auto;
    gap:14px; padding:20px; border-radius:var(--radius);
    background:linear-gradient(180deg, #0c2417cc, var(--glass));
    box-shadow:0 1px 0 #ffffff1a inset, 0 20px 60px #00000055, 0 0 0 1px #16ff7a1c inset;
    backdrop-filter:blur(14px) saturate(140%); transform-origin:center bottom; user-select:none; will-change:transform, opacity;
  }
  .chip{align-self:start; justify-self:start; padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700; color:#d9ffdf; background:#103a24cc; box-shadow:0 4px 12px #00000033;}
  h2{margin:4px 0 0; font-size:28px; letter-spacing:.2px}
  h3{margin:0; font-weight:600; color:var(--ink-sub)}
  .audioWrap{display:grid; grid-template-columns:auto; align-items:center; gap:12px;
    background:#05130a; border-radius:14px; padding:12px; box-shadow:inset 0 0 0 1px #16ff7a1c;}
  .playBtn,.trackbar,.time{display:none}

  .badge{position:absolute; top:18px; padding:12px 14px; border-radius:12px; font-weight:900; letter-spacing:.3px; transform:scale(.9); opacity:0; pointer-events:none; mix-blend-mode:screen;}
  .badge.left{left:18px; background:#00ffa31c; color:var(--good); border:2px solid #00ffa3; transform:rotate(-6deg);}
  .badge.right{right:18px; background:#ff9da11c; color:#ff9da1; border:2px solid #ff9da1; transform:rotate(6deg);}

  footer{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:8px 14px;}
  .controls{display:flex; gap:10px}
  button{appearance:none; border:0; border-radius:12px; padding:12px 16px; font-weight:800; cursor:pointer;
    transition:transform .08s var(--ease), box-shadow .12s var(--ease), opacity .12s var(--ease);
    box-shadow:0 0 0 2px rgba(50,205,50,.35), 0 8px 30px rgba(0,0,0,.45); color:#021b10;}
  .btn-left{background:linear-gradient(180deg,#65e792,#1ed760);}
  .btn-right{background:linear-gradient(180deg,#ff7e7e,#e63946);}
  .btn-start{background:linear-gradient(180deg,#65e792,#1ed760);}
  button:active{transform:translateY(1px) scale(.99)}

  /* verberg links/rechts tot start */
  #leftBtn,#rightBtn{display:none}

  /* Fail overlay */
  .fail-stage{position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.6); z-index:9998}
  #failGif{max-width:min(90vw,520px); max-height:80vh; border-radius:12px; box-shadow:0 10px 40px rgba(0,0,0,.6)}
  .fail-count{position:fixed; bottom:8vh; left:50%; transform:translateX(-50%); font-size:4rem; font-weight:900; color:var(--gold); text-shadow:0 4px 8px rgba(0,0,0,.8)}

  /* Mobile optimisation */
  @media (max-width:480px){
    .app{
      height:100dvh;
      margin:0;
      gap:8px;
    }
    footer{padding:8px;}
    .controls{
      position:fixed;
      bottom:10px;
      left:50%;
      transform:translateX(-50%);
      flex-direction:column;
      width:90%;
      z-index:999;
    }
    .controls button{
      width:100%;
      margin:4px 0;
    }
    .card{
      padding:16px;
      gap:10px;
    }
    h2{font-size:20px}
    h3{font-size:14px}
  }
</style>
</head>
<body>
<div class="glow" aria-hidden="true"></div>

<div class="app" role="application" aria-label="FIFA Swipe game">
  <header>
    <div class="brand">
      <div class="logo" aria-hidden="true"></div>
      <div class="title">FIFA Swipe <span class="muted">• Links = FIFA, Rechts = Niet</span></div>
    </div>
    <div class="beer-container" id="beerContainer" aria-hidden="true"></div>
  </header>

  <div class="deck" aria-live="polite"></div>

  <footer>
    <div class="controls">
      <button class="btn-start" id="startBtn">Start</button>
      <button class="btn-left" id="leftBtn">⬅ FIFA</button>
      <button class="btn-right" id="rightBtn">Not ➡</button>
    </div>
  </footer>
</div>

<div class="fail-stage" id="failStage">
  <img id="failGif" src="giphy.gif" alt="Fail animation">
  <div class="fail-count" id="failCount"></div>
</div>

<script>
const FAIL_SFX_PATH="soundeffect.mp3";

function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}}
const SONGS=[/* zelfde 100 liedjes als boven */];
// Shuffle bij start
shuffle(SONGS);
let ptr=0, streak=1, audio=null, sfx=null;
const deck=document.querySelector('.deck');
const beerContainer=document.getElementById('beerContainer');
const failStage=document.getElementById('failStage');
const failCount=document.getElementById('failCount');
const startBtn=document.getElementById('startBtn');
const leftBtn=document.getElementById('leftBtn');
const rightBtn=document.getElementById('rightBtn');

// Update cans
function updateBeerDisplay(){
  beerContainer.innerHTML="";
  const full=Math.floor(streak/12); const rem=streak%12;
  for(let i=0;i<full;i++) beerContainer.appendChild(makeCan(12,100));
  if(rem>0||full===0) beerContainer.appendChild(makeCan(rem||12,((rem||12)/12)*100));
}
function makeCan(n,h){
  const can=document.createElement('div');can.className='can';
  const fill=document.createElement('div');fill.className='fill';fill.style.height=h+'%';
  const count=document.createElement('div');count.className='sip-count';count.textContent=n.toString();
  can.appendChild(fill);can.appendChild(count);return can;
}

// Render card
function renderCard(song){
  const el=document.createElement('div');
  el.className='card';
  el.setAttribute('role','group');
  el.setAttribute('aria-label',`${song.title} by ${song.artist}`);
  el.innerHTML=`
    <div class="chip">Swipe links = FIFA • rechts = Niet</div>
    <h2>${song.title}</h2>
    <h3>${song.artist}</h3>
    <div class="audioWrap"></div>
    <div class="badge left">FIFA ✅</div>
    <div class="badge right">NIET ❌</div>
  `;
  deck.appendChild(el);
  wireCard(el,song);
  return el;
}

// Fetch preview (as eerder)
async function getPreviewUrl(song){ const q=encodeURIComponent(`${song.artist} ${song.title}`); const url=`https://itunes.apple.com/search?term=${q}&media=music&limit=5&country=US`; try{ const res=await fetch(url); if(!res.ok) return null; const data=await res.json(); const term=s=>(s||"").toLowerCase(); const title=term(song.title), artist=term(song.artist); let best=null,score=-1; for(const r of data.results){ const t=term(r.trackName), a=term(r.artistName); let s=0; if(t.includes(title)) s+=2; if(a.includes(artist.split(" ft")[0])) s+=2; if(t===title) s+=2; if(a===artist) s+=2; if(s>score && r.previewUrl){score=s;best=r.previewUrl;} } return best; }catch(e){ return null; }}

// Attach audio preview (no auto-play until start)
async function attachAudio(card,song,autoPlay){ const url=await getPreviewUrl(song); if(!url) return; if(audio){ try{ audio.pause(); }catch(e){} } audio=new Audio(url); audio.preload="auto"; if(autoPlay){ audio.play().catch(()=>{}); }}

// Handle answer
function answer(card,song,guessFifa){
  const ok=(song.fifa===guessFifa);
  const fling=ok?(guessFifa?-520:520):(guessFifa?-140:140);
  const rot=guessFifa?-12:12;
  (guessFifa?card.querySelector('.badge.left'):card.querySelector('.badge.right')).style.opacity=1;
  card.style.transition='transform .24s var(--ease), opacity .24s var(--ease), filter .24s var(--ease)';
  card.style.transform=`translateX(${fling}px) rotate(${rot}deg)`;
  card.style.opacity=ok?0:.45;
  card.style.filter=ok?'none':'grayscale(100%)';
  if(ok){
    streak++; updateBeerDisplay();
    setTimeout(()=>{ card.remove(); nextCard(true); },190);
  }else{
    const prev=streak; streak=1; updateBeerDisplay();
    failAnimation(prev).then(()=>{ card.remove(); nextCard(true); });
  }
}

// Drag & arrow keys
function wireCard(card,song){
  let startX=0, dx=0, dragging=false;
  const setBadge=dx=>{
    const L=card.querySelector('.badge.left'), R=card.querySelector('.badge.right');
    const opa=Math.min(1,Math.abs(dx)/120);
    if(dx<0){L.style.opacity=opa; R.style.opacity=0;} else {R.style.opacity=opa; L.style.opacity=0;}
  };
  card.addEventListener('pointerdown',e=>{dragging=true; startX=e.clientX; card.setPointerCapture(e.pointerId);});
  card.addEventListener('pointermove',e=>{ if(!dragging)return; dx=e.clientX-startX; card.style.transform=`translateX(${dx}px) rotate(${dx/40}deg)`; setBadge(dx);});
  card.addEventListener('pointerup',()=>{ if(!dragging)return; dragging=false; const threshold=Math.min(260,card.clientWidth*0.22); if(Math.abs(dx)>threshold){ const guess=dx<0; answer(card,song,guess); } else { card.style.transition='transform .16s var(--ease)'; card.style.transform='translateX(0) rotate(0)'; card.querySelector('.badge.left').style.opacity=0; card.querySelector('.badge.right').style.opacity=0; setTimeout(()=>card.style.transition='',160); } startX=0; dx=0; });
  window.addEventListener('keydown',e=>{ if(!deck.contains(card))return; if(e.key==='ArrowLeft')answer(card,song,true); if(e.key==='ArrowRight')answer(card,song,false);});
  attachAudio(card,song,false);
}

// Fail animation
function failAnimation(prev){
  return new Promise(resolve=>{
    try{ if(audio) audio.pause(); }catch(e){}
    failCount.textContent=prev;
    failStage.style.display='grid';
    try{ if(sfx){ sfx.pause(); sfx=null; } sfx=new Audio(FAIL_SFX_PATH); sfx.volume=1.0; sfx.currentTime=0; sfx.play().catch(()=>{}); }catch(e){}
    setTimeout(()=>{
      failStage.style.display='none';
      failCount.textContent='';
      try{ if(sfx){ sfx.pause(); sfx=null; } }catch(e){}
      resolve();
    },10000);
  });
}

function nextCard(autoPlay){
  if(ptr>=SONGS.length){
    ptr=0; shuffle(SONGS);
  }
  const song=SONGS[ptr++];
  renderCard(song);
  setTimeout(async()=>{ const card=deck.querySelector('.card:last-child'); await attachAudio(card,song,autoPlay); },0);
}

// Init
function init(){
  updateBeerDisplay();
  // Start button
  startBtn.addEventListener('click',()=>{
    startBtn.style.display='none';
    leftBtn.style.display='inline-block';
    rightBtn.style.display='inline-block';
    nextCard(true);
  }, {once:true});
  // Buttons
  leftBtn.addEventListener('click',()=>{ const c=deck.querySelector('.card'); if(!c)return; const idx=Math.max(0,ptr-1); answer(c,SONGS[idx],true); });
  rightBtn.addEventListener('click',()=>{ const c=deck.querySelector('.card'); if(!c)return; const idx=Math.max(0,ptr-1); answer(c,SONGS[idx],false); });
  // Glow
  const glow=document.querySelector('.glow');
  window.addEventListener('pointermove',e=>{
    glow.style.setProperty('--x',(e.clientX/innerWidth)*100+'%');
    glow.style.setProperty('--y',(e.clientY/innerHeight)*100+'%');
  });
}
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
